# Test: Checks interpolation of TIFF files with a reference vtk file
#   produced with previous versions of dune_copasi_sd/md

import logging.ini

__name = test_tiff

[grid]
dimension = 2
file = grids/square_triangles.msh
initial_level = 3

[model]
order = 1

[model.time_stepping]
rk_method = alexander_2
begin = 0.
end = 0.
step = 0.1
initial_step = 0.1
min_step = 1e-3
max_step = 1e-0
decrease_factor = 0.9
increase_factor = 1.1

[model.writer]
file_path = {__name}

[model.data]
flowers = data/tiff/flower-minisblack-16.tif

[model.compartments]
domain     = 0

############################ Model for domain ############################
[model.domain.initial]
u = flowers(x,y-0.25)

[model.domain.reaction]
u = 0

[model.domain.reaction.jacobian]
du_du = 0

[model.domain.diffusion]
u = 1e-3

######################### Compare with analytic vtk #########################
[wrapper.vtkcompare]
name = {__name}/{__name}-domain-00000
reference = reference/{__name}-00000
extension = vtu
relative = 2e-2
absolute = 1e-9
